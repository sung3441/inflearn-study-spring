# TCP, UDP

### IP 프로토콜에서 생긴 문제들(패킷 소실, 순서 미보장) 등을 해결할 수 있는 프로토콜

### 인터넷 프로토콜 스택의 4계층

- 애플리케이션 계층 - HTTP, FTP
- 전송 계층 - TCP, UDP
- 인터넷 계층 - IP
- 네트워크 인터페이스 계층

### 전송 패킷 정보

- ip 패킷: 출발지 ip, 목적지 ip, 기타...
- tcp 세그먼트: 출발지 port, 목적지 port, 전송 제어, 순서, 검증 정보...
- 전송 데이터
```
// TCP/IP 패킷이라고 함
ip 패킷(
    tcp 세그먼트 (
        전송 데이터
    )
)
```

### TCP 특징

- 연결 지향 - TCP 3 way handshake (가상 연결)
- 데이터 전달 보증
- 순서 보장

#### TCP 3 way handshake

1. client에서 server로 __SYN__ 메시지 전송
2. server에서 client로 __SYN__ + __ACK__ 메시지 전송
3. client에서 server로 __ACK__ 메시지 전송

- __SYN: 접속 요청__
- __ACK: 요청 수락__
* TCP는 논리적으로 연결된 것 뿐임.

#### 데이터 전달 보증

- 데이터를 전송하면 서버에서 데이터를 잘받았다는 응답을 해줌

#### 순서 보장

1. 클라리언트가 패킷을 패킷1, 패킷2, 패킷3 순서로 서버에 전송
2. 서버에 패킷1, __패킷3__, 패킷2 순서로 패킷 도착
3. 서버가 클라이언트에게 패킷2부터 다시 보내라고 요청

### UDP 특징

- 하얀 도화이젱 비유 (기능이 거의 없음)
- 연결지향 - TCP 3 way handshake x
- 데이터 전달 보증 x
- 순서 보장 x
- 데이터 전달 및 순서가 보장되지 않지만, 단순하고 빠름
- 정리
  - IP와 거의 같다 + PORT + 체크섬 정도만 추가
  - 애플리케이션에서 추가 작업 필요